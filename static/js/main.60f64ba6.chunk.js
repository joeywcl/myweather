(this["webpackJsonptoday-weather-app"]=this["webpackJsonptoday-weather-app"]||[]).push([[0],[,,,,,function(e,t,r){e.exports={inline:"ForecastItem_inline__2H3N_",showWeather:"ForecastItem_showWeather__t4G-c",iStyle:"ForecastItem_iStyle__1qhPM",moreDetails:"ForecastItem_moreDetails__2lhK7",bold:"ForecastItem_bold__2oEjE",small:"ForecastItem_small__9tLEx"}},,,function(e,t,r){e.exports={item:"HistoryItem_item__1YrOl",leftDetails:"HistoryItem_leftDetails__1mpMU",details:"HistoryItem_details__2YK0f",actions:"HistoryItem_actions__3CbRK"}},,function(e,t,r){e.exports={notification:"Notification_notification__u7yCE",error:"Notification_error__1LeNc",success:"Notification_success__11ihu"}},,,function(e,t,r){e.exports={history:"History_history__3JWod",empty:"History_empty__3yU2c"}},,,,function(e,t,r){e.exports={card:"Card_card__23y5o"}},function(e,t,r){e.exports={header:"MainHeader_header__3dqAt"}},function(e,t,r){e.exports={weather:"Forecasts_weather__1sEHs"}},,,,,,,,function(e,t,r){},,,function(e,t,r){"use strict";r.r(t);var n=r(9),a=r.n(n),c=r(3),i=r(7),s=Object(i.b)({name:"ui",initialState:{notificaton:null},reducers:{showNotification:function(e,t){e.notification={status:t.payload.status,title:t.payload.title,message:t.payload.message}}}}),o=s.actions,u=s,h=Object(i.b)({name:"weather",initialState:{items:[],changed:!1,new:!1,weatherData:{},getWeather:{}},reducers:{getHistory:function(e,t){e.items=t.payload.items},replaceData:function(e,t){var r=t.payload.getWeather,n="";r.dt&&(n=new Date(1e3*r.dt).toLocaleString()),e.getWeather={id:r.id,city:r.name,country:r.sys.country,weather:r.weather[0].main,weatherDesc:r.weather[0].description,maxTemp:r.main.temp_min,minTemp:r.main.temp_max,humidity:r.main.humidity,setTime:n},e.weatherData={},e.new=!1,e.changed=!1},addItemToWeather:function(e,t){var r=t.payload,n=e.items.find((function(e){return e.id===r.id})),a="";r.setTime&&(a=new Date(1e3*r.setTime).toLocaleTimeString()),e.changed=!0,n||e.items.unshift({id:r.id,city:r.city,country:r.country,weather:r.weather,weatherDesc:r.weatherDesc,maxTemp:r.maxTemp,minTemp:r.minTemp,humidity:r.humidity,setTime:a})},removeItemFromWeather:function(e,t){var r=t.payload,n=e.items.find((function(e){return e.id===r}));e.changed=!0,n&&(e.items=e.items.filter((function(e){return e.id!==r})))},callWeather:function(e,t){var r=t.payload;e.new=!0,e.weatherData={city:r.city,country:r.country}}}}),l=h.actions,m=h,d=Object(i.a)({reducer:{ui:u.reducer,weather:m.reducer}}),j=(r(27),r(2)),f=r(6),b=r(4),p=r.n(b),y=r(8),x=r.n(y),O=r(15),w=r(16),_=r(1),v=function(e){var t=Object(c.b)(),r=e.item,n=r.index,a=r.id,i=r.city,s=r.country,o=r.setTime;return Object(_.jsxs)("li",{className:x.a.item,children:[Object(_.jsxs)("div",{className:x.a.leftDetails,children:[Object(_.jsxs)("p",{children:[" ",n,". "]}),Object(_.jsxs)("p",{children:[i," , ",s]})]}),Object(_.jsx)("div",{className:x.a.details,children:Object(_.jsxs)("div",{className:x.a.actions,children:[Object(_.jsx)("p",{children:o}),Object(_.jsx)("button",{onClick:function(){t(l.callWeather({city:i,country:s}))},children:Object(_.jsx)(O.a,{})}),Object(_.jsx)("button",{onClick:function(){t(l.removeItemFromWeather(a))},children:Object(_.jsx)(w.a,{})})]})})]})},g=r(13),N=r.n(g),T=r(17),D=r.n(T),k=function(e){return Object(_.jsx)("section",{className:"".concat(D.a.card," ").concat(e.className?e.className:""),children:e.children})},F=function(){var e=Object(c.c)((function(e){return e.weather.items}));return Object(_.jsxs)(k,{className:N.a.history,children:[Object(_.jsx)("h2",{children:"Search History"}),e.length>0?Object(_.jsx)("ul",{children:e.map((function(e,t){return Object(_.jsx)(v,{item:{index:t+1,id:e.id,city:e.city,country:e.country,setTime:e.setTime}},e.id)}))}):Object(_.jsx)("p",{className:N.a.empty,children:"No Records"})]})},W=r(18),I=r.n(W),H=function(){return Object(_.jsx)("header",{className:I.a.header,children:Object(_.jsx)("h1",{children:"Today's Weather"})})},E=function(e){return Object(_.jsxs)(j.Fragment,{children:[Object(_.jsx)(H,{}),Object(_.jsx)("main",{children:e.children})]})},S=r(19),C=r.n(S),R=r(5),U=r.n(R),J=function(e){var t=e.weatherItem,r=t.city,n=t.country,a=t.weather,i=t.weatherDesc,s=t.minTemp,o=t.maxTemp,u=t.humidity,h=t.setTime,m=Object(c.b)(),d=Object(j.useRef)(""),f=Object(j.useRef)(""),b=Object(j.useRef)();return Object(_.jsxs)(j.Fragment,{children:[Object(_.jsx)("section",{className:"container",children:Object(_.jsxs)("form",{ref:b,onSubmit:function(e){e.preventDefault(),m(l.callWeather({city:d.current.value,country:f.current.value})),b.current.reset()},children:[Object(_.jsxs)("div",{className:U.a.inline,children:[Object(_.jsx)("label",{htmlFor:"city",children:"City : "}),Object(_.jsx)("input",{type:"text",name:"city",id:"city",ref:d})]}),Object(_.jsxs)("div",{className:U.a.inline,children:[Object(_.jsx)("label",{htmlFor:"country",children:"Country : "}),Object(_.jsx)("input",{type:"text",name:"country",id:"country",ref:f})]}),Object(_.jsx)("button",{type:"submit",children:"Get Weather"}),Object(_.jsx)("button",{onClick:function(e){e.preventDefault(),b.current.reset()},children:"Clear"})]})}),0!==Object.keys(e.weatherItem).length?Object(_.jsx)("section",{className:"container",children:Object(_.jsxs)("div",{className:U.a.showWeather,children:[Object(_.jsxs)("p",{children:[r," , ",n]}),Object(_.jsx)("h2",{children:a}),Object(_.jsx)("p",{className:U.a.iStyle,children:i}),Object(_.jsxs)("div",{className:U.a.moreDetails,children:[Object(_.jsxs)("div",{className:"feels",children:[Object(_.jsxs)("p",{children:[s," \u2103 ~ ",o," \u2103 \xb0F"]}),Object(_.jsx)("p",{className:U.a.bold,children:"Feels"})]}),Object(_.jsxs)("div",{className:"humidity",children:[Object(_.jsxs)("p",{children:[u,"%"]}),Object(_.jsx)("p",{className:U.a.bold,children:"Humidity"})]})]}),Object(_.jsxs)("p",{className:U.a.small,children:["Retrieve at: ",h]})]})}):null]})},L=function(){var e=Object(c.c)((function(e){return e.weather.getWeather}));return Object(_.jsx)(k,{className:C.a.weather,children:Object(_.jsx)(J,{weatherItem:e})})},q=r(10),K=r.n(q),M=function(e){var t="";"error"===e.status&&(t=K.a.error),"success"===e.status&&(t=K.a.success);var r="".concat(K.a.notification," ").concat(t);return Object(_.jsxs)("section",{className:r,children:[Object(_.jsx)("h2",{children:e.title}),Object(_.jsx)("p",{children:e.message})]})},G=!0;var P=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.weather})),r=Object(c.c)((function(e){return e.ui.notification}));return Object(j.useEffect)((function(){e(function(){var e=Object(f.a)(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=Object(f.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://weatherhistory-77a26-default-rtdb.firebaseio.com/history.json");case 2:if(t=e.sent){e.next=5;break}throw new Error("Unable to fetch history");case 5:return e.next=7,t.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,r();case 4:n=e.sent,t(l.getHistory({items:n.items||[]})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(o.showNotification({status:"error",title:"Retrieving History",message:"No History Found"}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(j.useEffect)((function(){G?G=!1:t.changed&&e(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(o.showNotification({status:"pending",title:"Retrieving...",message:"Retrieving your history list!"})),n=function(){var t=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://weatherhistory-77a26-default-rtdb.firebaseio.com/history.json",{method:"PUT",body:JSON.stringify({items:e.items})});case 2:if(t.sent.ok){t.next=5;break}throw new Error("Unable to update history");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=2,t.next=5,n();case 5:r(o.showNotification({status:"success",title:"Success!",message:"Fetching completed!"})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),r(o.showNotification({status:"error",title:"Error!",message:"History not found!"}));case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t,e]),Object(j.useEffect)((function(){var r;G?G=!1:t.new&&e((r=t,function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(r.weatherData.city,",").concat(r.weatherData.country,"&units=metric&appid=").concat("ddd12c48007ccc04acae24afcdf70f62"));case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Weather forecast not found.");case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,n();case 4:a=e.sent,t(l.replaceData({getWeather:a||{}})),t(l.addItemToWeather({id:a.id,city:a.name,country:a.sys.country,weather:a.weather[0].main,weatherDesc:a.weather[0].description,maxTemp:a.main.temp_min,minTemp:a.main.temp_max,humidity:a.main.humidity,setTime:a.dt})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(o.showNotification({status:"error",title:"Error!",message:"Fetching weather data failed!"}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[t,e]),Object(_.jsxs)(j.Fragment,{children:[r&&Object(_.jsx)(M,{status:r.status,title:r.title,message:r.message}),Object(_.jsxs)(E,{children:[Object(_.jsx)(L,{}),Object(_.jsx)(F,{})]})]})};a.a.render(Object(_.jsx)(c.a,{store:d,children:Object(_.jsx)(P,{})}),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.60f64ba6.chunk.js.map